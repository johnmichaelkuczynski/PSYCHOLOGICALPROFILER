 REUSABLE TOKEN + PAYWALL + PAYMENT SYSTEM (FINALIZED PROTOCOL)
Implement this system exactly. It has been finalized and tested in other apps. Do not modify anything.

ğŸ”“ FREE USER ACCESS (LIMITED USAGE â€” ONE-TIME)
Unregistered users may use the app with strict token limits:

Input token limit: â‰¤500 tokens

Output token limit: â‰¤300 tokens

Lifetime cap (input + output): 1,000 tokens total

Once this limit is hit:

Block all usage

Show:

ğŸ”’ Youâ€™ve reached the free usage limit. [Register & Unlock Full Access]

If a submission exceeds the input/output cap:

Show only a partial result (e.g., one-line grade or excerpt)

Display this prompt:

ğŸ”’ Full results available with upgrade. [Register & Unlock Full Access]

ğŸ”‘ REGISTERED USERS + CREDIT SYSTEM
Users register with email + password (no email verification required)

After login, show â€œBuy Creditsâ€ button

ğŸ’³ STRIPE CREDIT PURCHASE OPTIONS
$1 â†’ 2,000 tokens

$10 â†’ 30,000 tokens

$100 â†’ 600,000 tokens

$1,000 â†’ 10,000,000 tokens

After payment:

Instantly update the userâ€™s token balance

Store token balance in database keyed to userâ€™s email

If user has 0 tokens:

Block access and show:

ğŸ”’ Youâ€™ve used all your credits. [Buy More Credits]

ğŸ“„ DOCUMENT UPLOAD + STORAGE PRICING (REGISTERED USERS ONLY)
Free users cannot upload files. If they try:

ğŸ”’ File uploads require registration and credits. [Register & Unlock]

ğŸ“¤ ONE-TIME UPLOAD COST
When a registered user uploads a document (PDF, DOCX, TXT):

Estimate word count

Charge 1 token per 100 words, rounded up

Minimum charge: 100 tokens

Maximum charge: 10,000 tokens

Deduct silently from user's token balance at time of upload

ğŸ—„ï¸ MONTHLY STORAGE COST
To store uploaded documents:

Charge 1 token per 250 words per month

Auto-deduct silently each month

If user has no tokens remaining â†’ lock access to document

Show prompt:

ğŸ”’ File storage is paused until credits are added. [Buy More Credits]

ğŸ§  SYSTEM REQUIREMENTS
Track and log every token event with:

Timestamp

User/session ID

Token count used

Remaining token balance

Other system requirements:

Auth must persist across page reloads

Page refresh must not log out user

Logged-in users must never be forced to re-login

âœ… TEST CASES (REQUIRED BEFORE â€œDONEâ€)
Submit large input as unregistered user â†’ partial result + upgrade prompt

Hit 1,000-token lifetime cap as free user â†’ usage blocked + upgrade prompt

Register and purchase credits â†’ balance updated

Upload document â†’ correct token deduction

Refresh page â†’ user stays logged in

Only mark task complete if all 5 test cases visibly pass.









Ask ChatGPT
